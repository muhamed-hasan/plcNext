# قارئ بيانات PLC S7-1200 باستخدام Next.js

هذا المشروع يقرأ البيانات من PLC S7-1200 عبر بروتوكول S7comm باستخدام Next.js و nodes7.

## المميزات

- استخدام Next.js API Routes للاتصال بـ PLC
- واجهة مستخدم حديثة باستخدام React و Tailwind CSS
- تحديث البيانات كل 10 ثوانٍ
- دعم اللغة العربية بشكل كامل (RTL)
- تنسيق جميل للبيانات (درجات الحرارة، الرطوبة، سرعة الهواء)

## البدء

### المتطلبات

1. Node.js 16 أو أحدث
2. PLC S7-1200 متصل بشبكة يمكن الوصول إليها

### التثبيت

1. تثبيت المكتبات المطلوبة:

```bash
npm install
```

### التكوين

يمكنك تعديل إعدادات الاتصال بـ PLC في ملف `app/api/plc/route.js`:

```javascript
const plcConfig = {
  ip: '192.168.1.2',  // قم بتغييره إلى عنوان IP الخاص بـ PLC
  rack: 0,
  slot: 1,
  port: 102
};
```

وأيضًا تعديل المتغيرات التي تريد قراءتها:

```javascript
const variables = {
  T1: 'DB1,INT0',    // Integer at offset 0
  T2: 'DB1,INT2',    // Integer at offset 2
  // ... وهكذا
  Air_Speed: 'DB1,REAL24', // Real at offset 24
};
```

## تشغيل التطبيق

لتشغيل التطبيق في وضع التطوير:

```bash
npm run dev
```

لبناء التطبيق للإنتاج:

```bash
npm run build
```

لتشغيل التطبيق في وضع الإنتاج:

```bash
npm run start
```

## استخدام التطبيق

افتح متصفحك وانتقل إلى `http://localhost:3000/` لعرض واجهة المستخدم.

سترى بيانات PLC معروضة بطريقة سهلة الاستخدام، مع تحديثها تلقائيًا كل 10 ثوانٍ.

## مزايا استخدام Node.js بدلاً من Python

1. **بنية التطبيق الموحدة**: استخدام JavaScript فقط في جميع أجزاء التطبيق.
2. **بدون عمليات منفصلة**: التطبيق بأكمله يعمل في عملية واحدة، مما يجعل التشغيل أسهل.
3. **API مباشرة**: البيانات تُقرأ مباشرة من PLC إلى التطبيق دون الحاجة إلى ملفات وسيطة.
4. **قابلية للتوسع**: سهولة إضافة ميزات جديدة باستخدام مكتبات JavaScript.
5. **أداء أفضل**: استجابة أسرع واستهلاك أقل للموارد.

## استكشاف الأخطاء وإصلاحها

إذا واجهت مشاكل في الاتصال بـ PLC:

1. تأكد من أن PLC متصل بالشبكة
2. تحقق من إعدادات IP و Rack و Slot
3. تأكد من أن جدار الحماية لا يمنع الاتصال بالمنفذ 102
4. تحقق من تكوين DB في PLC
5. تأكد من أن مكتبة nodes7 تم تثبيتها بشكل صحيح

## ملاحظات إضافية

- يمكن تخصيص فترة التحديث عن طريق تغيير قيمة الـ `setInterval` في ملف `app/components/PlcMonitor.jsx`
- يمكن إضافة المزيد من المتغيرات بسهولة عن طريق تحديثها في ملف API Route 